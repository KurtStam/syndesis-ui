<div class="spinner spinner-lg" *ngIf="!ready"></div>
<div *ngIf="ready">
  <h1>{{command.info.name}}</h1>
  <div *ngIf="formErrors">
    <ul>
      <li *ngFor="let error of formErrors">
        {{error.description}}
      </li>
    </ul>
  </div>
  <div *ngIf="response">
    <h6>Command response</h6>
    <pre>{{response | json}}</pre>
  </div>
  <form *ngIf="command && !response" (ngSubmit)="onSubmit(entity)" #f="ngForm">
    <div *ngFor="let field of getFields(command)">
      <div *ngIf="field.enabled">
        <div [ngSwitch]="field.type">
          <template [ngSwitchCase]="'boolean'">
            <div class="form-group">
              <div class="checkbox">
                <label><input type="checkbox" [(ngModel)]="entity[field.id]" name="{{field.id}}">{{field.title || field.id}}</label>
                <p class="help-block" *ngIf="field.description">{{field.description}}</p>
              </div>
            </div>
          </template>
          <template ngSwitchDefault>
            <div class="form-group">
              <label attr.for="{{field.id}}">{{field.title || field.id}}</label>
              <input type="text" class="form-control" id="{{field.id}}" [(ngModel)]="entity[field.id]" name="{{field.id}}">
              <p class="help-block" *ngIf="field.description">{{field.description}}</p>
            </div>
          </template>
        </div>
      </div>
    </div>
    <button class="btn btn-primary" type="submit" [disabled]="!f.form.valid">Submit</button>
  </form>
  <p></p>
  <div>
    <h6>Command Input</h6>
    <pre>{{command | json}}</pre>
  </div>
</div>
